<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuition Assistance Calculator</title>
    <!-- Bootstrap 2 CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/2.1.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/2.1.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
</head>
<body>



    <style>
        label.error {
            position: absolute;
            color: red;
            background-color: #fff;
            padding: 2px 2px;
        }
        input[type="radio"] + label.error {
            transform: translate(0, 20px);
        }
        #result {
            position: fixed;
            background-color: rgba(0, 0, 0, 0.5);
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .result_inner {
            width: 800px;
            height: 600px;
            overflow-y: scroll;
            position: fixed;
            top: 50%;
            margin-top: -300px;
            left: 50%;
            margin-left: -400px;
            background-color: #fff;
            padding: 20px;
            display: flex;
            align-content: flex-start;
            align-items: flex-start;
            justify-content: center;
            flex-direction: column;
        }

        h2 {
            color: #97233F;
            font-size: 24px;
            width: 100%;
        }

        .close {
            position: absolute;
            top: 0;
            right: 10px;
            color: #000;
            background-color: #fff;
            font-size: 30px;
            cursor: pointer;
        }

        .btn.btn-primary {
            background-color: #97233F !important;
            background-image: none;
        }

        .controls1 {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            align-content: center;
            align-items: center;
            justify-content: flex-start;
            gap: 10px;
            line-height: 1em;
        }

        .controls label {
            margin-bottom: 0;
        }

        .controls input {
            margin-top: 0;
        }
        #result {
            position: fixed;
            /*background-color: rgba(0, 0, 0, 0.5);*/
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .result_inner {

            overflow-y: hidden;
            position: fixed;
            background-color: #fff;
            padding: 20px;
            display: flex;
            align-content: flex-start;
            align-items: flex-start;
            justify-content: center;
            flex-direction: column;
        }
    </style>



<div class="container">
    <h2 class="text-center">Tuition Assistance Calculator</h2>
    <form class="form-horizontal" id="formTuition">

        <div id="part_1">
            <p>

                This Tuition Assistance Award Calculator is intended to estimate your tuition, based on the information provided below.</p>
            <p>A final determination will be made after a confidential review of your completed Tuition Assistance Application and tax returns.
            </p>
            <div class="control-group">
                <label class="control-label">The student applicant is currently enrolled in</label>
                <div class="controls controls1">
                    <input type="radio" id="inputApplicantEnrolled-NonJewishPrivateSchool" name="inputApplicantEnrolled"
                           value="Private School" required="required"/> <label
                        for="inputApplicantEnrolled-NonJewishPrivateSchool" style="display: inline">Private
                    School</label>
                    <input type="radio" id="inputApplicantEnrolled-JewishDaySchool" name="inputApplicantEnrolled"
                           value="Jewish Day School" required="required"/> <label
                        for="inputApplicantEnrolled-JewishDaySchool" style="display: inline">Jewish Day School</label>
                    <input type="radio" id="inputApplicantEnrolled-PublicSchool" name="inputApplicantEnrolled"
                           value="Public/Charter School" required="required"/> <label for="inputApplicantEnrolled-PublicSchool"
                                                                            style="display: inline">Public/Charter School</label>
                </div>
            </div>


            <div class="control-group">
                <label class="control-label" for="inputTotalSchoolAgedKids">Number of children for whom school tuition will be paid next fall (including the applicant), TK/Kindergarten through twelfth grade:</label>
                <div class="controls">
                    <select id="inputTotalSchoolAgedKids" required>
                        <option value="">Select Number</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                    </select>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="inputAGI">Annual Gross Income (Line 11 on IRS Form 1040):</label>
                <div class="controls">
                    <input type="number" id="inputAGI" value="" required/>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label" for="inputAssets">Value of Family Liquid Assets (Total of cash, checking,
                    savings, brokerage, 529 and retirement accounts):</label>
                <div class="controls">
                    <input type="number" id="inputAssets" value="" required/>
                </div>
            </div>

            <div class="control-group">
                <div class="controls">
                    <button type="button" class="btn btn-primary" id="btn_1">Estimate</button>
                </div>
            </div>
        </div>

        <div id="part_2" style="display: none">
            <div class="control-group">
                <div class="controls">
                    <h3>Disclaimer</h3>
                    <p>
                        The Tuition Assistance Award Range estimated on the following screen is based on the basic parameters youâ€™ve provided.

</p>
                    <p>A more thorough review and final determination will be calculated after receiving your completed Tuition Assistance Application and tax returns.</p>
                    <p>
                        This estimator is meant to give you a sense of what your tuition may be per student, not including supplemental fees.
                    </p>
                    <!--<label class="checkbox">
                        <input type="checkbox" required> I Agree
                    </label>-->
                </div>

                <div class="control-group">
                    <div class="controls">
                        <button type="submit" class="btn btn-primary">I Agree</button>
                    </div>
                </div>
            </div>
        </div>

    </form>
</div>


<!-- Bootstrap 2 JS -->

<script>
    jQuery(document).ready(function ($) {
        $('#btn_1').on('click', function (e) {
            e.preventDefault();
            if ($("#formTuition").valid()) {
                $("#part_1").hide();
                $("#part_2").show();
            }
        });
        $('#formTuition').on('submit', function (e) {
            e.preventDefault();

            var AGI = [
                24999,
                25000,
                100000,
                150000,
                200000,
                350000,
                500000
            ];

            var Assets = [
                499999,
                499999,
                999999,
                1249999,
                1499999,
                1999999,
                2499999,
                4999999,
                10000000
            ];

            var A3 = $('[name="inputApplicantEnrolled"]:checked').val() === 'Private School' ? 'Yes' : 'No';
            var B3 = $('[name="inputApplicantEnrolled"]:checked').val() === 'Jewish Private School' ? 'Yes' : 'No';
            var C3 = $('[name="inputApplicantEnrolled"]:checked').val() === 'Public/Charter School' ? 'Yes' : 'No';
            var D3 = $('#inputTotalSchoolAgedKids').val();
            var E3 = $('#inputAGI').val();
            var F3 = $('#inputAssets').val();

            //=IFS(E3>$AB$9, "25%", E3>$AB$8, "15%", E3>$AB$7, "15%", E3>$AB$6, "12%" , E3>0, "10%")
            var G3 = 0;
            if (E3 > AGI[6]) {
                G3 = 25;
            } else if (E3 > AGI[5]) {
                G3 = 15;
            } else if (E3 > AGI[4]) {
                G3 = 15;
            } else if (E3 > AGI[3]) {
                G3 = 12;
            } else {
                G3 = 10;
            }

            G3 = G3 / 100;

            //=IFS(F3>$X$11, "30%", F3>$X$10, "20%", F3>$X$9, "15%", F3>$X$8, "10%", F3>$X$7, "5%", F3>$X$6, "4%", F3>$X$5, "3%", F3>$X$4, "2%", F3>0, "0%")
            var H3 = 0;
            if (F3 > Assets[8]) {
                H3 = 30;
            } else if (F3 > Assets[7]) {
                H3 = 20;
            } else if (F3 > Assets[6]) {
                H3 = 15;
            } else if (F3 > Assets[5]) {
                H3 = 10;
            } else if (F3 > Assets[4]) {
                H3 = 5;
            } else if (F3 > Assets[3]) {
                H3 = 4;
            } else if (F3 > Assets[2]) {
                H3 = 3;
            } else if (F3 > Assets[1]) {
                H3 = 2;
            } else {
                H3 = 0;
            }

            H3 = H3 / 100;

            //=SUM(E3*G3)+(F3*H3)
            var I3 = E3 * G3 + F3 * H3;

            var J3 = I3 / D3;

            var result = "";

            console.log(C3);
            console.log(J3);

            var resultMap = {
                "r1": {
                    'estimated_tuition': '~$21,800',
                    'estimated_award': '$30,000+',
                    'current_families': '15',
                    'with_payment_plan': '~$1,400 per month'
                },
                "r2": {
                    'estimated_tuition': '$16,800 - $21,800',
                    'estimated_award': '$20,000 - $25,000',
                    'current_families': '18',
                    'with_payment_plan': '$1,400 - $1,816 per month'
                },
                "r3": {
                    'estimated_tuition': '$21,800 - $26,800',
                    'estimated_award': '$20,000 - $25,000',
                    'current_families': '18',
                    'with_payment_plan': '$1,816 - $2,233 per month'
                },
                "r4": {
                    'estimated_tuition': '$26,800 - $36,800',
                    'estimated_award': '$10,000 - $20,000',
                    'current_families': '51',
                    'with_payment_plan': '$2,233 - $3,066 per month'
                },
                "r5": {
                    'estimated_tuition': '$36,800 - $41,800',
                    'estimated_award': '$5,000 - $10,000',
                    'current_families': '30',
                    'with_payment_plan': '$3,066 - $3,483 per month'
                },
                "r6": {
                    'estimated_tuition': '$41,800 - $44,300',
                    'estimated_award': '$2,500 - $5,000',
                    'current_families': '12',
                    'with_payment_plan': '$3,483 - $3,961 per month'
                },
                "r7": {
                    'estimated_tuition': '$44,300 - $46,800',
                    'estimated_award': '$0 - $2,500',
                    'current_families': '1',
                    'with_payment_plan': '$3,961 - $4,680 per month'
                },
            };

            if (C3 === 'Yes') {
                if (J3 > 45999) {
                    result = "r6";
                } else if (J3 > 32999) {
                    result = "r5";
                } else if (J3 > 21999) {
                    result = "r4";
                } else if (J3 > 15749) {
                    result = "r3";
                } else if (J3 > 9499) {
                    result = "r2";
                } else {
                    result = "r1";
                }
                // IFS(J3>45999, "$41,800 - 44,300", J3>32999, "$36,800 - 41,800", J3>21999, "$26,800 - 36,800",
                // J3>15749, "$21,800 - 26,800", J3>9499, "$16,800 - 21,800", J3>0, "~$21,800")
            }
            if (C3 === 'No') {
                if (J3 > 45999) {
                    result = "r7";
                } else if (J3 > 32999) {
                    result = "r6";
                } else if (J3 > 21999) {
                    result = "r5";
                } else if (J3 > 15749) {
                    result = "r4";
                } else if (J3 > 9499) {
                    result = "r3";
                } else {
                    result = "r2";
                }
                // IFS(J3>45999, "$44,300 - 46,800", J3>32999, "$41,800 - 44,300", J3>21999, "$36,800 - 41,800",
                // J3>15749, "$26,800 - 36,800", J3>9499, "$21,800 - 26,800", J3>0, "$16,800 - 21,800")
            }

            const result1 = '<p>We currently have ' +
                resultMap[result].current_families + ' families with this profile.' + '</p>' +
                '<p>Tuition Assistance Award Range: ' + resultMap[result].estimated_award + '</p>' +
                '<p>Estimated Tuition: ' + resultMap[result].estimated_tuition + '</p>' +
                '<p style="font-size: 12px;color:#97233F;">A 12 month pay plan: ' + resultMap[result].with_payment_plan + '</p>';
            // window.localStorage.setItem('result', '');
            // window.location.href = '/dtl/result.html';
            $('#result p.result').html(result1);
            $('#result').show();

        })

        $('.close').on('click', function (e) {
            e.preventDefault();
            $('#result').hide();
        })
        $('#result').on('click', function (e) {

            if ($(e.target).attr('id') !== 'result' || e.target.tagName.toLowerCase() === 'a') {
                return;
            }
            e.preventDefault();
            $('#result').hide();
        })
    })
</script>
</body>
</html>
